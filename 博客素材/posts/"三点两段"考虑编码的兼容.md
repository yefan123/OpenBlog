改编原博客的时候意外发现查找具体分类和标签的时候出现bug:中文无法显示,全变成问号..
debug之后发现是平台迁移造成的后果,原作者特意的写了一个方法,将中文编码转成utf8,但是新平台上,浏览器传过来的数据本来就是utf8的,所以编码的重写导致乱码;

[解决方案]
首先把那个方法给废了:
>//解码 解决在URL传中文值出现的乱码问题
		public static String pareCode(String str) throws UnsupportedEncodingException{
			return new String(str.getBytes("ISO-8859-1"),"UTF-8");			
		}

然后(其实我也被各种编码转换给搞乱了),为了杜绝后患,统一使用utf8,即在request和response中都指定utf8(高速浏览器),除此之外对接mysql的jdbc以及mysql的内置编码都通通utf8!!

(之于windows下需要做一些修改才能正确交给终端显示:)
>mysql> set character_set_results=utf8 ;

所以我总结出了一种"三点两段"的思考顺序,这个所谓的三点就是"浏览器" "服务器" 和 "数据库"
而两段指的就是这三个点之间的传输媒介.
所有总共这些有5个位置需要我们考虑数据在这个位置的编码格式,其中三个点是数据存储时的字符编码格式,两个点指的是数据在传输的时候用什么编码格式存储.只要考虑周全了这5个要素,bug的问题一定迎刃而解,而任何乱码的现象都是由这5个要素中的一个或多个造成的.
那我这个博客为例:
- 浏览器:HTTP response头部的编码字段指明显示的格式
- 浏览器发送到servlet:HTTP request头部确认一下是以特定编码发送的
- 服务器内部:不用说了,各个对象之间转接都需要制定清楚
- jdbc:需要在驱动上面制定编码
- 数据库内部:不用说,5种内置编码,如果拎不清的话,全部utf8没问题