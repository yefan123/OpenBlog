 ####    每个***blog服务***提供商无论是新浪,csdn,博客园还是Blogger,都特工了博客分类和添加标签的功能,而标签机制又不只存在于博文,还存在一些公**共聊天室类**似的社交平台,比如微博话题,OSChina动弹,脸书动态,Twitter等等,那么分类机制和标签机制的区别是什么呢,首先最明显的一个就是:
>类与内容体是一对多的关系

>标签与内容体是多对多的关系

## 数据库如何存储上述两种关系?
文章的分类就是一个简单嵌套关系,对于关系型mysql,最外面肯定是按时间顺序存放的全部文章列表,同时有一个auto_increment的id,然后可以根据每一个分类建一个索引表(通过id)从而避免全表扫描.
关于索引的哲学可以参考这篇:
>http://blog.csdn.net/github_38885296/article/details/77854630

标签机制就比较麻烦了,其实分类与标签可以类比java里面的**类与接口**:
```
java类我们都知道,一个子类只能有一个父类,但一个类可以有多个子类;刚开始只有类与对象机制的时候,java程序员还是用的不亦乐乎的,但是随着需求的增加,他们慢慢发现类已经无法满足所有需求 了, 比如一个Car类既要继承一个Vehicle类,又要属于Expensive父类.这种平行意义上的两种划分方式单继承是无法满足的**多继承**的需求的,所以好像从jdk7开始,支持多继承的接口正式支持,接口的出现打破了传统的经典嵌套理论,提供了更开放的多对多关系的存储方式和逻辑关系.
```

当然和接口不通的是,标签机制需要我们自己实现,有一种最简单暴力的方式是将所有**多对多**关系转化为**一对一**的关系,比如:
![](https://image-store.slidesharecdn.com/4e9888e1-5873-4ad0-ad6d-1b2339a9f396-original.png)
#### 图中双方各有3个单元,之间关系复杂,任务是多对多;
#### 这个关系图中共有6条线,那么就可以转换成6个一对一的关系:
![](https://image-store.slidesharecdn.com/e58e33ed-c63e-4c55-bbef-76b30bf75db1-original.png)

于是关系型数据库表中只要存这样的一对一关系就可以了,非常清晰易懂.
但是这样的缺陷也很明显,那就是经常需要全表扫描才能parse出完整的多对多关系,才能在显示出完整的标签分类图.
##### 所以留一个疑问,有没有更好的方法来存储呢,如果你有请留言:D.


2018-01-22 12:08:06 星期一